spring:
  profiles:
    default: dev
  application:
    name: prop-manager
  data:
    web:
      pageable:
        default-page-size: 20
        max-page-size: 100
  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
    from: ${MAIL_FROM:noreply@propmanager.com}
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${AUTH_ISSUER_URI}

app:
  # Public base URL used for generated links (e.g. invite emails).
  # Often differs from server port/address (e.g. https behind Caddy vs internal :8080).
  # Override with APP_BASE_URL.
  base-url: ${APP_BASE_URL:https://propmanager.com}
  rate-limit:
    cache-expire-minutes: 15
  cache:
    permissions:
      max-size: ${CACHE_PERMISSIONS_MAX_SIZE:10000}
      ttl-minutes: ${CACHE_PERMISSIONS_TTL_MINUTES:60}
  cors:
    enabled: false
    allowed-origins: []
    allowed-methods: GET, POST, PUT, PATCH, DELETE, OPTIONS
    allowed-headers: "*"
    exposed-headers: []
    allow-credentials: true
    max-age: 3600
  audit:
    enabled: true
    include-query-string: true
    include-client-info: true
  notification:
    email:
      enabled: ${NOTIFICATION_EMAIL_ENABLED:true}
  invite:
    expiry-hours: ${INVITE_EXPIRY_HOURS:72}
    resend-cooldown-minutes: ${INVITE_RESEND_COOLDOWN_MINUTES:15}
    max-email-retries: ${INVITE_MAX_EMAIL_RETRIES:3}
    email-retry-interval-minutes: ${INVITE_EMAIL_RETRY_INTERVAL_MINUTES:15}

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html

server:
  # Override with SERVER_PORT (default 8080). Optional: SERVER_ADDRESS to bind to a specific interface.
  port: ${SERVER_PORT:8080}
  tomcat:
    accesslog:
      enabled: true
      pattern: '%h %t "%r" %s %b %D ms'

resilience4j:
  ratelimiter:
    configs:
      default:
        limitForPeriod: 100
        limitRefreshPeriod: 1m
        timeoutDuration: 0 # Don't wait; fail immediately
