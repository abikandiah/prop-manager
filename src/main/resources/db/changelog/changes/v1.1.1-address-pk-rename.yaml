# Renames addresses PK from address_id to id (for DBs created before PK naming standard).
databaseChangeLog:
  - changeSet:
      id: "addresses-rename-pk-to-id"
      author: "prop-manager"
      preConditions:
        - onFail: MARK_RAN
        - columnExists:
            tableName: addresses
            columnName: address_id
      changes:
        - dropForeignKeyConstraint:
            baseTableName: prop
            constraintName: fk_prop_address
        - renameColumn:
            tableName: addresses
            oldColumnName: address_id
            newColumnName: id
            columnDataType: uuid
        - addForeignKeyConstraint:
            baseTableName: prop
            baseColumnNames: address_id
            constraintName: fk_prop_address
            referencedTableName: addresses
            referencedColumnNames: id
